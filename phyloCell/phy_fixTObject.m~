%refresh the link(the pointers) between the image cells and the Tobjects
function phy_fixTObject(incells)

global segmentation


    %tObjectOut(i).addObject(selObject(IX));
    
    frames=segmentation.
    
    tcell=segmentation.tcells1(incells);
    
    index=[incells tcell.daughterList];
    
for l=index
    
    frames=segmentation.tcells1(index).lostFrames;
    
    for j=frames
        
     objects=segmentation.cells1(j,:);


        for i=1:numel(objects)
             n=objects(i).n;
    
             if n==l && objects(i).ox~=0
                 segmentation.tcells1(index).addObject(objects(i));
             end
        end
    end
end
end

%%% sort phy_objects so that they appear chronologically

for i=1:numel(tObjectOut)
    
   %tempObj=phy_Object;
   
   %a=tObjectOut(i).Obj;
   frames=[tObjectOut(i).Obj.image];
   
   %for j=1:length(a)
   %       frames=[frames,a(j).image];
   %end
   
   [frames,IX]=sort(frames);
   
   %tempObj.Obj=a(IX);
   
   %for j=1:length(a)
      %size(tempObj(j)), size(a(IX(j))) 
   %   tempObj(j)=a(IX(j)); 
    
   %end 
   
   %tObjectOut(i).Obj=tempObj;
   tObjectOut(i).Obj=tObjectOut(i).Obj(IX);
   tObjectOut(i).detectionFrame=frames(1);
   tObjectOut(i).lastFrame=frames(end);
end

